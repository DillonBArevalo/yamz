#!/usr/bin/python
# Testing, testing ...  

import os, sys, optparse
import json, psycopg2 as pqdb
import seaice



## Establish connection to PostgreSQL db ##

try:

  try: 
    config = seaice.get_config()
  except OSError: 
    print >>sys.stderr, "error: config file '%s' not found" % options.config_file
    sys.exit(1)

  sea = seaice.SeaIceConnector(config.get('default', 'user'),       
                               config.get('default', 'password'),
                               config.get('default', 'dbname'))

  sea.insertComment({'term_id': 1001, 
                           'owner_id': 10002, 
                           'comment_string': "This is an awesome term!"}) 
  print sea.getCommentHistory(1001)

except pqdb.DatabaseError, e:
  print 'error: %s' % e    
  sys.exit(1)
